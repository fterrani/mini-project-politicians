<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/WEB-INF/templates/BasicTemplate.xhtml">
	
	<ui:define name="title">Party details</ui:define>
	
    <ui:define name="content">
	
	    <h:form>
			<h:commandLink action="withdrawFromBudget">
				<h:outputText value="Withdraw from the budget" />
			</h:commandLink>
	    </h:form>
    	
    	<h1><h:outputText value="#{politicsManagedBean.party.name}" /></h1>
    	
    	<h:dataTable value="#{politicsManagedBean.party.politicians}" var="politician">
        	<h:column>
        		<f:facet name="header">First name</f:facet>
        		#{politician.firstname}
        	</h:column>
        	<h:column>
        		<f:facet name="header">Last name</f:facet>
        		#{politician.lastname}
        	</h:column>
        	<h:column>
        		<f:facet name="header">Mandates</f:facet>
        		<ui:repeat var="#{politician.mandates}" value="mandate" varStatus="loop">
        			#{mandate.name}
        			<h:outputText rendered="#{!loop.last}">, </h:outputText>
        		</ui:repeat>
        	</h:column>
        	<h:column>
        		<f:facet name="header">Address</f:facet>
        		#{politician.contactinfo.street}
        		<br />#{politician.contactinfo.postcode} #{politician.contactinfo.locality}
        		<br />#{politician.contactinfo.email}
				<br />#{politician.contactinfo.phone}
        	</h:column>
		</h:dataTable>
    </ui:define>
</ui:composition>
</html>